<!DOCTYPE html>
<html>
<head>
    <title>Network Manager</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; display: flex; gap: 20px; padding: 20px; background: #f0f2f5; }
        .panel { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 350px; }
        .route-item { border-bottom: 1px solid #eee; padding: 10px 0; font-size: 14px; display: flex; justify-content: space-between; align-items: center; }
        input { margin-bottom: 5px; padding: 8px; width: 80%; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 8px 12px; cursor: pointer; border-radius: 4px; border: none; transition: 0.2s; }
        .btn-add { background: #28a745; color: white; width: 100%; margin-top: 10px; font-weight: bold; }
        .btn-del { background: #dc3545; color: white; font-size: 11px; }
        .btn-add:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="panel">
        <h2>Add New Route</h2>
        <input type="text" id="cityA" placeholder="City A Name (e.g. JED)">
        <div style="display:flex; gap:5px">
            <input type="number" id="ax" placeholder="A - X (px)"> 
            <input type="number" id="ay" placeholder="A - Y (px)">
        </div>
        <hr>
        <input type="text" id="cityB" placeholder="City B Name (e.g. RUH)">
        <div style="display:flex; gap:5px">
            <input type="number" id="bx" placeholder="B - X (px)"> 
            <input type="number" id="by" placeholder="B - Y (px)">
        </div>
        <button class="btn-add" onclick="addRoute()">Add Route</button>
    </div>

    <div class="panel" style="flex-grow: 1;">
        <h2>Active Routes</h2>
        <div id="routeList"></div>
        <br>
        <a href="view.html" target="_blank" style="font-weight:bold; color: #0052cc;">Open View Page (Refresh that page after adding)</a>
    </div>

    <script>
        let routes = JSON.parse(localStorage.getItem('airlineRoutes')) || [];

        function renderRoutes() {
            const list = document.getElementById('routeList');
            list.innerHTML = '';
            routes.forEach((r, index) => {
                list.innerHTML += `
                    <div class="route-item">
                        <span><strong>${r.a} âœˆ ${r.b}</strong> (${r.ax},${r.ay} to ${r.bx},${r.by})</span>
                        <button class="btn-del" onclick="deleteRoute(${index})">Delete</button>
                    </div>`;
            });
            localStorage.setItem('airlineRoutes', JSON.stringify(routes));
        }

const SHEET_URL = "YOUR_WEB_APP_URL_HERE"; 

async function addRoute() {
    const r = {
        a: document.getElementById('cityA').value, 
        ax: document.getElementById('ax').value, 
        ay: document.getElementById('ay').value,
        b: document.getElementById('cityB').value, 
        bx: document.getElementById('bx').value, 
        by: document.getElementById('by').value
    };

    if (!r.a || !r.ax || !r.bx) {
        alert("Please fill in all city names and coordinates.");
        return;
    }

    try {
        await fetch(SHEET_URL, {
            method: 'POST',
            mode: 'no-cors', // This is important for Google Script deployments
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(r)
        });

        alert("Saved to Cloud successfully!");
        
        // Optional: Clear the inputs after saving
        document.getElementById('cityA').value = '';
        document.getElementById('cityB').value = '';
        
    } catch (error) {
        console.error("Error saving to cloud:", error);
        alert("Failed to save. Check your console for errors.");
    }
}
            };
            if(!r.a || isNaN(r.ax)) return alert("Please fill all fields");
            routes.push(r);
            renderRoutes();
        }

        function deleteRoute(index) {
            routes.splice(index, 1);
            renderRoutes();
        }
        renderRoutes();
    </script>
</body>
</html>
